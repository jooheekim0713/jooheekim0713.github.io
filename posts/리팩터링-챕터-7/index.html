<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="[리팩터링] chapter 7 캡슐화" /><meta property="og:locale" content="en" /><meta name="description" content="p.236 레코드 캡슐화하기" /><meta property="og:description" content="p.236 레코드 캡슐화하기" /><link rel="canonical" href="https://jooheekim0713.github.io/posts/%EB%A6%AC%ED%8C%A9%ED%84%B0%EB%A7%81-%EC%B1%95%ED%84%B0-7/" /><meta property="og:url" content="https://jooheekim0713.github.io/posts/%EB%A6%AC%ED%8C%A9%ED%84%B0%EB%A7%81-%EC%B1%95%ED%84%B0-7/" /><meta property="og:site_name" content="joohee Kim" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-06-27T09:28:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[리팩터링] chapter 7 캡슐화" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-07-01T15:14:33+09:00","datePublished":"2022-06-27T09:28:00+09:00","description":"p.236 레코드 캡슐화하기","headline":"[리팩터링] chapter 7 캡슐화","mainEntityOfPage":{"@type":"WebPage","@id":"https://jooheekim0713.github.io/posts/%EB%A6%AC%ED%8C%A9%ED%84%B0%EB%A7%81-%EC%B1%95%ED%84%B0-7/"},"url":"https://jooheekim0713.github.io/posts/%EB%A6%AC%ED%8C%A9%ED%84%B0%EB%A7%81-%EC%B1%95%ED%84%B0-7/"}</script><title>[리팩터링] chapter 7 캡슐화 | joohee Kim</title><link rel="shortcut icon" href="/assets/img/favicons/song_favicon.png" /><meta name="apple-mobile-web-app-title" content="joohee Kim" /><meta name="application-name" content="joohee Kim" /><meta name="msapplication-TileColor" content="#da532c" /><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml" /><meta name="theme-color" content="#ffffff" /><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/song_circle.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">joohee Kim</a></div><div class="site-subtitle font-italic">software engineer upload posting what i learned</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/jooheekim0713" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['jooheekim.dev','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="https://www.linkedin.com/in/952a57240" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[리팩터링] chapter 7 캡슐화</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[리팩터링] chapter 7 캡슐화</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1656289680" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jun 27, 2022 </em> </span> <span> Updated <em class="" data-ts="1656656073" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 1, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/jooheekim0713">joohee Kim</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3255 words"> <em>18 min</em> read</span></div></div></div><div class="post-content"><blockquote><p>p.236 레코드 캡슐화하기 <br /></p></blockquote><blockquote><p>p.246 컬렉션 캡슐화하기 <br /> 컬렉션 병수로의 접근을 캡슐화하면서 게터가 컬렉션 자체를 반환하도록 한다면, 그 컬렉션을 감싼 클래스가 눈치채지 못하는 상태에서 컬렉션의 원소들이 바뀌어버릴 수 있다. <br /> 이런 문제를 방지하기 위해 컬렉션을 감싼 클래스에 add(), remove()라는 이름의 컬렉션 변경자 메서드를 만든다. 이렇게 항상 컬렉션을 소유한 클래스를 통해서만 원소를 변경하도록 하면 프로그램을 개선하면서 컬렉션 변경방식도 원하는 대로 수정할 수 있다. <br /> 가장 흔히 사용하는 방식은 컬렉션 게터를 제공하되 내부 컬렉션의 복제본을 반환하는 것이다. 복제본을 수정해도 원본 컬렉션에는 영향을 주지 않는다.</p></blockquote><h2 id="기존코드"><span class="mr-2">기존코드</span><a href="#기존코드" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="person-class"><span class="mr-2">Person class</span><a href="#person-class" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Person</span><span class="p">{</span>
	<span class="kd">constructor</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_course</span> <span class="o">=</span> <span class="p">[];</span>
	<span class="p">}</span>
	<span class="kd">get</span> <span class="nx">name</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_name</span><span class="p">;}</span>
	<span class="kd">get</span> <span class="nx">courses</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_courses</span><span class="p">;}</span>
	<span class="kd">set</span> <span class="nx">courses</span><span class="p">(</span><span class="nx">aList</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">_courses</span> <span class="o">=</span> <span class="nx">aList</span><span class="p">;}</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="course-class"><span class="mr-2">Course class</span><a href="#course-class" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Course</span><span class="p">{</span>
	<span class="kd">constructor</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="nx">isAdvanced</span><span class="p">){</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_isAdvanced</span> <span class="o">=</span> <span class="nx">isAdvanced</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="kd">get</span> <span class="nx">name</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_name</span><span class="p">;}</span>
	<span class="kd">get</span> <span class="nx">isAdvanced</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_isAdvanced</span><span class="p">;}</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="클라이언트"><span class="mr-2">클라이언트</span><a href="#클라이언트" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre>	<span class="nx">numAdvancedCourses</span> <span class="o">=</span> <span class="nx">aPerson</span><span class="p">.</span><span class="nx">courses</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">c</span> <span class="o">=&gt;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">isAdvanced</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>

	<span class="kd">const</span> <span class="nx">basicCourseNames</span> <span class="o">=</span> <span class="nx">readBasicCourseNames</span><span class="p">(</span><span class="nx">filename</span><span class="p">);</span>
	<span class="nx">aPerson</span><span class="p">.</span><span class="nx">courses</span> <span class="o">=</span> <span class="nx">basicCourseNames</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">name</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">Course</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="kc">false</span><span class="p">));</span>
	<span class="c1">// 모든 필드가 접근자 메서드로 보호받고 있으니 데이터를 캡슐화했다고 생각할 수 있으나</span>
	<span class="c1">//세터를 이용해 수업 컬렉션을 통째로 설정한 클라이언트는 누구든 이 컬렉션을 마음대로 수정할 수 있다.	</span>
	<span class="k">for</span><span class="p">(</span><span class="kd">const</span> <span class="nx">name</span> <span class="k">of</span> <span class="nx">readBasicCourseNames</span><span class="p">(</span><span class="nx">filename</span><span class="p">)){</span>
		<span class="nx">aPerson</span><span class="p">.</span><span class="nx">courses</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">Course</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="kc">false</span><span class="p">));</span>
	<span class="p">}</span>
	<span class="c1">//이런 식으로 목록 데이터를 갱신할 수 있다면 Person 객체가 더는 컬렉션을 제어할 수 없으니 캡슐화가 깨진다. </span>
	<span class="c1">//필드를 참조하는 과정만 캡슐화하고 필드에 담긴 내용은 캡슐화하지 않았기 때문에 발생하는 문제다.</span>
</pre></table></code></div></div><h2 id="수정된-코드"><span class="mr-2">수정된 코드</span><a href="#수정된-코드" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><blockquote><p>course 목록을 수정하지 못하도록 course 필드를 캡슐화한다.</p></blockquote><h3 id="person-class-1"><span class="mr-2">Person class</span><a href="#person-class-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Person</span><span class="p">{</span>
	<span class="kd">constructor</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_course</span> <span class="o">=</span> <span class="p">[];</span>
	<span class="p">}</span>
	<span class="kd">get</span> <span class="nx">name</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_name</span><span class="p">;}</span>
	<span class="kd">get</span> <span class="nx">courses</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_courses</span><span class="p">.</span><span class="nx">slice</span><span class="p">();}</span>
	<span class="c1">// 메서드를 사용하지 않고서는 아무도 목록을 변경할 수 없게 만들기 위해 복제본을 제공한다.</span>
	<span class="kd">set</span> <span class="nx">courses</span><span class="p">(</span><span class="nx">aList</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">_courses</span> <span class="o">=</span> <span class="nx">aList</span><span class="p">.</span><span class="nx">slice</span><span class="p">();}</span>
	<span class="c1">//set course()를 제거하는 것이 가장 좋지만 set courses()를 제공해야할 필요가 있다면 인수로 받은 컬렉션의 복제본을 필드에 저장하게 한다. </span>
	<span class="nx">addCourse</span><span class="p">(</span><span class="nx">aCourse</span><span class="p">){</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_aCourse</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">aCourse</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="nx">removeCourse</span><span class="p">(</span><span class="nx">aCourse</span><span class="p">,</span><span class="nx">fnIfAbsent</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">RangeError</span><span class="p">();}){</span>
		<span class="kd">const</span> <span class="nx">index</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_courses</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">aCourse</span><span class="p">);</span>
		<span class="k">if</span><span class="p">(</span><span class="nx">index</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="nx">fnIfAbsent</span><span class="p">();</span>
		<span class="k">else</span> <span class="k">this</span><span class="p">.</span><span class="nx">_courses</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="course-class-1"><span class="mr-2">Course class</span><a href="#course-class-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Course</span><span class="p">{</span>
	<span class="kd">constructor</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="nx">isAdvanced</span><span class="p">){</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_isAdvanced</span> <span class="o">=</span> <span class="nx">isAdvanced</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="kd">get</span> <span class="nx">name</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_name</span><span class="p">;}</span>
	<span class="kd">get</span> <span class="nx">isAdvanced</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_isAdvanced</span><span class="p">;}</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="클라이언트-1"><span class="mr-2">클라이언트</span><a href="#클라이언트-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>	<span class="nx">numAdvancedCourses</span> <span class="o">=</span> <span class="nx">aPerson</span><span class="p">.</span><span class="nx">courses</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">c</span> <span class="o">=&gt;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">isAdvanced</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
	
	<span class="k">for</span><span class="p">(</span><span class="kd">const</span> <span class="nx">name</span> <span class="k">of</span> <span class="nx">readBasicCourseNames</span><span class="p">(</span><span class="nx">filename</span><span class="p">)){</span>
		<span class="nx">aPerson</span><span class="p">.</span><span class="nx">addCourse</span><span class="p">(</span><span class="k">new</span> <span class="nx">Course</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="kc">false</span><span class="p">));</span>
	<span class="p">}</span>
	<span class="c1">//개별 원소를 추가하고 제거하는 메서드를 제공하기 때문에 setCourses()를 사용할 일이 없어졌으니 제거한다. (set courses() 메서드 제거)</span>
	<span class="c1">//set courses()를 제공해야할 필요가 있다면 인수로 받은 컬렉션의 복제본을 필드에  저장한다.</span>
	
</pre></table></code></div></div><blockquote><p>기존 데이터는 캡슐화하고 클라이언트가 데이터를 요구할 때 데이터의 복제본을 제공한다면 예상치 못한 데이터 수정이 촉발한 오류에도 기존 데이터는 그대로 남아있다. 컬렉션 관리를 책임지는 클래스라면 항상 복제본을 제공해야 한다.</p></blockquote><blockquote><p>p.251 기본형을 객체로 바꾸기 <br /> 단순 출력 이상의 기능이 필요해지면 그 데이터를 표현하는 전용 클래스를 정의한다. 시작은 기본형 데이터를 단순히 감싼 것과 큰 차이가 없을지 모르나 나중에 특별한 동작이 필요해지면 이 클래스에 추가하면 되니 프로그램이 커질 수록 유용한 도구가 된다.</p></blockquote><h2 id="기존-코드"><span class="mr-2">기존 코드</span><a href="#기존-코드" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="order-class"><span class="mr-2">Order class</span><a href="#order-class" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Order</span><span class="p">{</span>
	<span class="kd">constructor</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">priority</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">priority</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="p">...</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="클라이언트-2"><span class="mr-2">클라이언트</span><a href="#클라이언트-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>	<span class="nx">highPriorityCount</span> <span class="o">=</span> <span class="nx">orders</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">o</span> <span class="o">=&gt;</span> <span class="dl">"</span><span class="s2">high</span><span class="dl">"</span> <span class="o">===</span> <span class="nx">o</span><span class="p">.</span><span class="nx">priority</span> <span class="o">||</span>
										<span class="dl">"</span><span class="s2">rush</span><span class="dl">"</span> <span class="o">===</span> <span class="nx">o</span><span class="p">.</span><span class="nx">priority</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
</pre></table></code></div></div><h2 id="1차-수정된-코드"><span class="mr-2">1차 수정된 코드</span><a href="#1차-수정된-코드" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="order-class-1"><span class="mr-2">Order class</span><a href="#order-class-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Order</span><span class="p">{</span>
	<span class="kd">constructor</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">priority</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">priority</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="kd">get</span> <span class="nx">priorityString</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_priority</span><span class="p">.</span><span class="nx">toString</span><span class="p">();}</span>
	<span class="kd">set</span> <span class="nx">priority</span><span class="p">(</span><span class="nx">aString</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">_priority</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Priority</span><span class="p">(</span><span class="nx">aString</span><span class="p">);}</span>
	<span class="p">...</span>
<span class="p">}</span>
</pre></table></code></div></div><blockquote><p>데이터를 다루기 전에 변수부터 캡슐화한다. <br /> 우선순위 속성을 초기화하는 생성자에서 방금 정의한 세터를 활용,<br /> 이렇게 필드를 자가 캡슐화하면 필드 이름을 바꿔도 클라이언트 코드는 유지할 수 있다. <br /></p></blockquote><blockquote><p>Priority 클래스를 만든다. 이 상황에서는 게터보다 toString()을 사용한다. 클라이언트 입장에서 보면 속성 자체를 받은 것이 아니라 해당 속성을 문자열로 표현한 값을 요청한게 되기 때문이다. <br /> 따라서 Order 클래스의 게터가 반환하는 값은 우선순위가 아닌 우선순위를 표현하는 문자열이기 때문에 이름을 priority에서 priorityString으로 바꿔준다. <br /></p></blockquote><h3 id="priority-class"><span class="mr-2">Priority class</span><a href="#priority-class" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Priority</span><span class="p">{</span>
	<span class="kd">constructor</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">_value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;}</span>
	<span class="nx">toString</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_value</span><span class="p">;}</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="클라이언트-3"><span class="mr-2">클라이언트</span><a href="#클라이언트-3" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>	<span class="nx">highPriorityCount</span> <span class="o">=</span> <span class="nx">orders</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">o</span> <span class="o">=&gt;</span> <span class="dl">"</span><span class="s2">high</span><span class="dl">"</span> <span class="o">===</span> <span class="nx">o</span><span class="p">.</span><span class="nx">priorityString</span> <span class="o">||</span>
										<span class="dl">"</span><span class="s2">rush</span><span class="dl">"</span> <span class="o">===</span> <span class="nx">o</span><span class="p">.</span><span class="nx">priorityString</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
</pre></table></code></div></div><details> <summary> 2차 수정된 코드 접기/펼치기 버튼</summary><div><h2 id="section"><span class="mr-2">2차 수정된 코드</span><a href="#section" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><blockquote><p>Priority 객체를 제공하는 게터를 Order 클래스에 만든다. <br /> Order의 세터가 Priority의 인스턴스를 받도록 한다. <br /></p></blockquote><h3 id="order-class"><span class="mr-2">Order class</span><a href="#order-class" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Order</span><span class="p">{</span>
	<span class="kd">constructor</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">priority</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">priority</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="kd">get</span> <span class="nx">priority</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_priority</span><span class="p">;}</span>
	<span class="kd">get</span> <span class="nx">priorityString</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_priority</span><span class="p">.</span><span class="nx">toString</span><span class="p">();}</span>
	<span class="kd">set</span> <span class="nx">priority</span><span class="p">(</span><span class="nx">aString</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">_priority</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Priority</span><span class="p">(</span><span class="nx">aString</span><span class="p">);}</span>
	<span class="p">...</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="priority-class"><span class="mr-2">Priority class</span><a href="#priority-class" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><blockquote><p>우선순위 값을 검증하고 비교하는 로직을 추가한다.</p></blockquote><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Priority</span><span class="p">{</span>
	<span class="kd">constructor</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>
		<span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="nx">instancof</span> <span class="nx">Priority</span><span class="p">)</span> <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
		<span class="k">if</span><span class="p">(</span><span class="nx">Priority</span><span class="p">.</span><span class="nx">legalValues</span><span class="p">().</span><span class="nx">inclues</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
		<span class="k">else</span>
			<span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">`&lt;</span><span class="p">${</span><span class="nx">value</span><span class="p">}</span><span class="s2">&gt;는 유효하지 않은 우선순위 입니다.`</span><span class="p">);</span>	
	<span class="p">}</span>
	<span class="nx">toString</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_value</span><span class="p">;}</span>
	<span class="kd">get</span> <span class="nx">_index</span><span class="p">(){</span><span class="k">return</span> <span class="nx">Priority</span><span class="p">.</span><span class="nx">legalValues</span><span class="p">().</span><span class="nx">findIndex</span><span class="p">(</span><span class="nx">s</span> <span class="o">=&gt;</span> <span class="nx">s</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">_value</span><span class="p">;)}</span>
	<span class="kd">static</span> <span class="nx">legalValues</span><span class="p">(){</span><span class="k">return</span> <span class="p">[</span><span class="dl">'</span><span class="s1">low</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">normal</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">high</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">rush</span><span class="dl">'</span><span class="p">]}</span>
	<span class="nx">equals</span><span class="p">(</span><span class="nx">other</span><span class="p">){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_index</span> <span class="o">===</span> <span class="nx">other</span><span class="p">.</span><span class="nx">_index</span><span class="p">;}</span>
	<span class="nx">higherThan</span><span class="p">(</span><span class="nx">other</span><span class="p">){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_index</span> <span class="o">&gt;</span> <span class="nx">other</span><span class="p">.</span><span class="nx">_index</span><span class="p">;}</span>
	<span class="nx">lowerThan</span><span class="p">(</span><span class="nx">other</span><span class="p">){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_index</span> <span class="o">&lt;</span> <span class="nx">other</span><span class="p">.</span><span class="nx">_index</span><span class="p">;}</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="section-1"><span class="mr-2">클라이언트</span><a href="#section-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>	<span class="nx">highPriorityCount</span> <span class="o">=</span> <span class="nx">orders</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">o</span> <span class="o">=&gt;</span> <span class="nx">o</span><span class="p">.</span><span class="nx">priority</span><span class="p">.</span><span class="nx">higherThan</span><span class="p">(</span><span class="k">new</span> <span class="nx">Priority</span><span class="p">(</span><span class="dl">"</span><span class="s2">normal</span><span class="dl">"</span><span class="p">))).</span><span class="nx">length</span><span class="p">;</span>
</pre></table></code></div></div></div></details><p><br /></p><blockquote><p>p.256 임시변수를 질의 함수로 바꾸기 <br /> 긴 함수의 한 부분을 별도 함수로 추출하고자 할때 먼저 변수들을 각각의 함수로 만들면 일이 수월해진다. 추출한 함수에 변수를 따로 전달할 필요가 없어지기 때문이다. 또한 이 덕분에 추출한 함수와 원래 함수의 경계가 더 분명해지기도 하는데, 그러면 부자연스러운 의존관계나 부수효과를 찾고 제거하는 데 도움이 된다. 이번 리팩터링은 클래스 안에서 적용할 때 효과가 크다. 클래스는 추출할 메서드들에 공유 컨텍스트를 제공하기 때문이다. 클래스 바깥의 최상위 함수로 추출하면 매개변수가 너무 많아져서 함수를 사용하는 장점이 줄어든다.</p></blockquote><h2 id="기존-코드-1"><span class="mr-2">기존 코드</span><a href="#기존-코드-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="order-class-2"><span class="mr-2">Order class</span><a href="#order-class-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Order</span><span class="p">{</span>
	<span class="kd">constructor</span><span class="p">(</span><span class="nx">quantity</span><span class="p">,</span> <span class="nx">item</span><span class="p">){</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_quantity</span> <span class="o">=</span> <span class="nx">quantity</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_item</span> <span class="o">=</span> <span class="nx">item</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="kd">get</span> <span class="nx">price</span><span class="p">(){</span>
		<span class="kd">var</span> <span class="nx">basePrice</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_quantity</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">_item</span><span class="p">.</span><span class="nx">price</span><span class="p">;</span>
		<span class="kd">var</span> <span class="nx">discountFactor</span> <span class="o">=</span> <span class="mf">0.98</span><span class="p">;</span>
		
		<span class="k">if</span><span class="p">(</span><span class="nx">basePrice</span> <span class="o">&gt;</span> <span class="mi">1000</span><span class="p">)</span> <span class="nx">discountFactor</span> <span class="o">-=</span> <span class="mf">0.03</span><span class="p">;</span>
		<span class="k">return</span> <span class="nx">basePrice</span> <span class="o">*</span> <span class="nx">discountFactor</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><h2 id="수정된-코드-1"><span class="mr-2">수정된 코드</span><a href="#수정된-코드-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="order-class-3"><span class="mr-2">Order class</span><a href="#order-class-3" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Order</span><span class="p">{</span>
	<span class="kd">constructor</span><span class="p">(</span><span class="nx">quantity</span><span class="p">,</span> <span class="nx">item</span><span class="p">){</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_quantity</span> <span class="o">=</span> <span class="nx">quantity</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_item</span> <span class="o">=</span> <span class="nx">item</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="kd">get</span> <span class="nx">price</span><span class="p">(){</span>
		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">basePrice</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">discountFactor</span><span class="p">;</span>	
	<span class="p">}</span>
	<span class="kd">get</span> <span class="nx">basePrice</span><span class="p">(){</span> <span class="k">this</span><span class="p">.</span><span class="nx">_quantity</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">_item</span><span class="p">.</span><span class="nx">price</span><span class="p">;}</span>
	<span class="kd">get</span> <span class="nx">discountFactor</span><span class="p">(){</span>
		<span class="kd">var</span> <span class="nx">discountFactor</span> <span class="o">=</span> <span class="mf">0.98</span><span class="p">;</span>
		<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">basePrice</span> <span class="o">&gt;</span> <span class="mi">1000</span><span class="p">)</span> <span class="nx">discountFactor</span> <span class="o">-=</span> <span class="mf">0.03</span><span class="p">;</span>
		<span class="k">return</span> <span class="nx">discountFactor</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><blockquote><p>임시변수인 basePrice, discountFactor를 메서드로 바꾼다. <br /> 두 변수에 const를 붙여 수정을 못하게 변경한다. ( 지나친 재대입으로 컴파일에러가 발생한다. ) <br /> basePrice 대입문의 우변을 게터로 추출한다. <br /> discountFactor와 관련된 연산을 게터로 추출한다. <br /></p></blockquote><blockquote><p>p.260 클래스 추출하기 <br /> 클래스는 반드시 명확하게 추상화하고 소수의 주어진 역할만 처리해야 한다. 메서드와 데이터가 너무 많은 클래스는 이해하기가 쉽지 않으니 잘 살펴보고 적절히 분리하는 것이 좋다. 특히 일부 데이터와 메서드를 따로 묶을 수 있다면 어서 분리하라는 신호다. 함께 변경되는 일이 많거나 서로 의존하는 데이터들도 분리한다. 특정 데이터나 메서드 일부를 제거해도 논리적으로 문제가 없다면 분리할 수 있다는 뜻이다.</p></blockquote><h2 id="기존의-코드"><span class="mr-2">기존의 코드</span><a href="#기존의-코드" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="person-class-2"><span class="mr-2">Person class</span><a href="#person-class-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Person</span><span class="p">{</span>
	<span class="kd">get</span> <span class="nx">name</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_name</span><span class="p">;}</span>
	<span class="kd">set</span> <span class="nx">name</span><span class="p">(</span><span class="nx">arg</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">_name</span> <span class="o">=</span> <span class="nx">arg</span><span class="p">;}</span>
	<span class="kd">get</span> <span class="nx">telephoneNumber</span><span class="p">(){</span><span class="k">return</span> <span class="s2">`(</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">officeAreaCode</span><span class="p">}</span><span class="s2">)</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">officeNumber</span><span class="p">}</span><span class="s2">`</span><span class="p">;}</span>
	<span class="kd">get</span> <span class="nx">officeAreaCode</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_officeAreaCode</span><span class="p">;}</span>
	<span class="kd">set</span> <span class="nx">officeAreaCode</span><span class="p">(</span><span class="nx">arg</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">_officeAreaCode</span> <span class="o">=</span> <span class="nx">arg</span><span class="p">;}</span>
	<span class="kd">get</span> <span class="nx">officeNumber</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_officeNumber</span><span class="p">;}</span>
	<span class="kd">set</span> <span class="nx">officeNumber</span><span class="p">(</span><span class="nx">arg</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">_officeNumber</span> <span class="o">=</span> <span class="nx">arg</span><span class="p">;}</span>
<span class="p">}</span>
</pre></table></code></div></div><h2 id="수정된-코드-2"><span class="mr-2">수정된 코드</span><a href="#수정된-코드-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="person-class-3"><span class="mr-2">Person class</span><a href="#person-class-3" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Person</span><span class="p">{</span>
	<span class="kd">constructor</span><span class="p">(){</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_telephoneNumber</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TelephoneNumber</span><span class="p">();</span>
	<span class="p">}</span>
	<span class="kd">get</span> <span class="nx">name</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_name</span><span class="p">;}</span>
	<span class="kd">set</span> <span class="nx">name</span><span class="p">(</span><span class="nx">arg</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">_name</span> <span class="o">=</span> <span class="nx">arg</span><span class="p">;}</span>
	<span class="kd">get</span> <span class="nx">telephoneNumber</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_telephoneNumber</span><span class="p">.</span><span class="nx">toString</span><span class="p">();}</span>
	<span class="kd">get</span> <span class="nx">officeAreaCode</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_telephoneNumber</span><span class="p">.</span><span class="nx">areaCode</span><span class="p">;}</span>
	<span class="kd">set</span> <span class="nx">officeAreaCode</span><span class="p">(</span><span class="nx">arg</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">_telephoneNumber</span><span class="p">.</span><span class="nx">areaCode</span> <span class="o">=</span> <span class="nx">arg</span><span class="p">;}</span>
	<span class="kd">get</span> <span class="nx">officeNumber</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_telephoneNumber</span><span class="p">.</span><span class="nx">number</span><span class="p">;}</span>
	<span class="kd">set</span> <span class="nx">officeNumber</span><span class="p">(</span><span class="nx">arg</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">_telephoneNumber</span><span class="p">.</span><span class="nx">number</span> <span class="o">=</span> <span class="nx">arg</span><span class="p">;}</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="telephonenumber-class"><span class="mr-2">TelephoneNumber class</span><a href="#telephonenumber-class" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">TelephoneNumber</span><span class="p">{</span>
	<span class="kd">get</span> <span class="nx">toString</span><span class="p">(){</span><span class="k">return</span> <span class="s2">`(</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">areaCode</span><span class="p">}</span><span class="s2">)</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">number</span><span class="p">}</span><span class="s2">`</span><span class="p">;}</span>
	<span class="kd">get</span> <span class="nx">areaCode</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_areaCode</span><span class="p">;}</span>
	<span class="kd">set</span> <span class="nx">areaCode</span><span class="p">(</span><span class="nx">arg</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">_areaCode</span> <span class="o">=</span> <span class="nx">arg</span><span class="p">;}</span>
	<span class="kd">get</span> <span class="nx">number</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_number</span><span class="p">;}</span>
	<span class="kd">set</span> <span class="nx">number</span><span class="p">(</span><span class="nx">arg</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">_number</span> <span class="o">=</span> <span class="nx">arg</span><span class="p">;}</span>
<span class="p">}</span>
</pre></table></code></div></div><blockquote><p>전화번호 정보가 쓸모가 많으니 TelephoneNumber 클래스를 클라이언트에게 공개하려면 ‘office’로 시작하는 메서드를 없애고 TelephoneNumber의 접근자를 바로 사용하도록 바꿀 수 있다. 그러나 기왕 이렇게 쓸거라면 전화번호를 값 객체로 만드는 방법도 있다. (9.4절참조를 값으로 바꾸기 참고)</p></blockquote><blockquote><p>p.264 클래스 인라인하기 <br /> 제 역할을 못해서 그대로 두면 안되는 클래스를 인라인한다. 연락을 옮기는 리팩터링을 하고나니 특정 클래스에 남은 역할이 거의 없을 때 이런 현상이 자주 생긴다. 이럴 땐 가장 많이 사용하는 클래스로 흡수시키자. <br /> 두 클래스의 기능을 지금과 다르게 배분하고 싶을 때도 클래스를 인라인한다. 클레스를 인라인해서 하나로 합친 다음 새로운 클래스를 추출하는 게 쉬울 수도 있기 때문이다.</p></blockquote><h2 id="기존-코드-2"><span class="mr-2">기존 코드</span><a href="#기존-코드-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="shipment-class"><span class="mr-2">Shipment class</span><a href="#shipment-class" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Shipment</span><span class="p">{</span>
	<span class="p">...</span>
	<span class="kd">get</span> <span class="nx">trackingInfo</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_trackingInformation</span><span class="p">.</span><span class="nx">display</span><span class="p">;}</span>
	<span class="kd">get</span> <span class="nx">trackingInformation</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_trackingInformation</span><span class="p">;}</span>
	<span class="kd">set</span> <span class="nx">trackingInformation</span><span class="p">(</span><span class="nx">aTrackingInformation</span><span class="p">){</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_trackingInformation</span> <span class="o">=</span> <span class="nx">aTrackingInformation</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="trackinginformation-class"><span class="mr-2">TrackingInformation class</span><a href="#trackinginformation-class" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">TrackingInformation</span><span class="p">{</span>
	<span class="kd">get</span> <span class="nx">shippingCompany</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_shippingCompany</span><span class="p">;}</span>
	<span class="kd">set</span> <span class="nx">shippingCompany</span><span class="p">(</span><span class="nx">arg</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">_shippingCompany</span> <span class="o">=</span> <span class="nx">arg</span><span class="p">;}</span>
	<span class="kd">get</span> <span class="nx">trackingNumber</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_trackingNumber</span><span class="p">;}</span>
	<span class="kd">set</span> <span class="nx">trackingNumber</span><span class="p">(</span><span class="nx">arg</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">_trackingNumber</span> <span class="o">=</span> <span class="nx">arg</span><span class="p">;}</span>
	<span class="kd">get</span> <span class="nx">display</span><span class="p">(){</span><span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">shippingCompany</span><span class="p">}</span><span class="s2"> : </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">trackingNumber</span><span class="p">}</span><span class="s2">`</span><span class="p">;}</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="클라이언트-4"><span class="mr-2">클라이언트</span><a href="#클라이언트-4" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>	<span class="nx">aShipment</span><span class="p">.</span><span class="nx">trackingInformation</span><span class="p">.</span><span class="nx">shippingCompany</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">vendor</span><span class="p">;</span>
</pre></table></code></div></div><h2 id="수정된-코드-3"><span class="mr-2">수정된 코드</span><a href="#수정된-코드-3" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="shipment-class-1"><span class="mr-2">Shipment class</span><a href="#shipment-class-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Shipment</span><span class="p">{</span>
	<span class="p">...</span>
	<span class="kd">get</span> <span class="nx">shippingCompany</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_shippingCompany</span><span class="p">;}</span>
	<span class="kd">set</span> <span class="nx">shippingCompany</span><span class="p">(</span><span class="nx">arg</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">shippingCompany</span> <span class="o">=</span> <span class="nx">arg</span><span class="p">;}</span>
	<span class="kd">get</span> <span class="nx">trackingInfo</span><span class="p">(){</span><span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">shippingCompany</span><span class="p">}</span><span class="s2"> : </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">trackingNumber</span><span class="p">}</span><span class="s2">`</span><span class="p">;}</span>
	<span class="kd">get</span> <span class="nx">trackingInformation</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_trackingInformation</span><span class="p">;}</span>
	<span class="kd">set</span> <span class="nx">trackingInformation</span><span class="p">(</span><span class="nx">aTrackingInformation</span><span class="p">){</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_trackingInformation</span> <span class="o">=</span> <span class="nx">aTrackingInformation</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="kd">get</span> <span class="nx">trackingNumber</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_trackingNumber</span><span class="p">;}</span>
	<span class="kd">set</span> <span class="nx">trackingNumber</span><span class="p">(</span><span class="nx">arg</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">_trackingNumber</span> <span class="o">=</span> <span class="nx">arg</span><span class="p">;}</span>	
<span class="p">}</span>
</pre></table></code></div></div><h3 id="trackinginformation-class-1"><span class="mr-2"><del>TrackingInformation class</del></span><a href="#trackinginformation-class-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h3 id="클라이언트-5"><span class="mr-2">클라이언트</span><a href="#클라이언트-5" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>	<span class="nx">aShipment</span><span class="p">.</span><span class="nx">shippingCompany</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">vendor</span><span class="p">;</span>
</pre></table></code></div></div><blockquote><p>p.268 위임 숨기기 <br /> 캡슐화는 모듈들이 시스템의 다른 부분에 대해 알아야할 내용을 줄여준다. 캡슐화가 잘 되어 있다면 무언가를 변경해야 할때 함께 고려해야 할 모듈 수가 적어져서 코드를 변경하기가 훨씬 쉬워진다. <br /> 위임 객체의 인터페이스가 바뀌면 이 인터페이스를 사용하는 모든 클라이언트가 코드를 수정해야한다. 이러한 의존성을 없애려면 서버 자체에 위임 메서드를 만들어서 위임 객체의 존재를 숨기면 된다. 그러면 위임 객체가 수정되더라도 서버 코드만 고치면 되며, 클라이언트는 아무런 영향을 받지 않는다.</p></blockquote><h2 id="기존-코드-3"><span class="mr-2">기존 코드</span><a href="#기존-코드-3" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="person-class-4"><span class="mr-2">Person class</span><a href="#person-class-4" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Person</span><span class="p">{</span>
	<span class="kd">constructor</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">_name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;}</span>
	<span class="kd">get</span> <span class="nx">name</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_name</span><span class="p">;}</span>
	<span class="kd">get</span> <span class="nx">department</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_department</span><span class="p">;}</span>
	<span class="kd">set</span> <span class="nx">department</span><span class="p">(</span><span class="nx">arg</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">_department</span> <span class="o">=</span> <span class="nx">arg</span><span class="p">;}</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="department-class"><span class="mr-2">Department class</span><a href="#department-class" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Department</span><span class="p">{</span>
	<span class="p">...</span>
	<span class="kd">get</span> <span class="nx">chargeCode</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_chargeCode</span><span class="p">;}</span>
	<span class="kd">set</span> <span class="nx">chargeCode</span><span class="p">(</span><span class="nx">arg</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">_charCode</span> <span class="o">=</span> <span class="nx">arg</span><span class="p">;}</span>
	<span class="kd">get</span> <span class="nx">manager</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_manager</span><span class="p">;}</span>
	<span class="kd">set</span> <span class="nx">manager</span><span class="p">(</span><span class="nx">arg</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">_manager</span> <span class="o">=</span> <span class="nx">arg</span><span class="p">;}</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="클라이언트-6"><span class="mr-2">클라이언트</span><a href="#클라이언트-6" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>	<span class="nx">manager</span> <span class="o">=</span> <span class="nx">aPerson</span><span class="p">.</span><span class="nx">department</span><span class="p">.</span><span class="nx">manager</span><span class="p">;</span>
</pre></table></code></div></div><blockquote><p>클라이언트에서 어떤 사람이 속한 부서의 관리자를 알고 싶어한다. 클라이언트는 부서 클래스가 관리자 정보를 제공한다는 사실을 알아야한다. 이러한 의존성을 줄이려면 클라이언트가 부서 클래스를 볼 수 없게 숨기고, 대신 사람 클래스에 간단한 위임 메서드를 만들면 된다.</p></blockquote><h2 id="수정된-코드-4"><span class="mr-2">수정된 코드</span><a href="#수정된-코드-4" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="person-class-5"><span class="mr-2">Person class</span><a href="#person-class-5" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Person</span><span class="p">{</span>
	<span class="p">...</span>
	<span class="c1">//manager 메서드 추가</span>
	<span class="kd">get</span> <span class="nx">manager</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_department</span><span class="p">.</span><span class="nx">manager</span><span class="p">;}</span>
	<span class="p">...</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="클라이언트-7"><span class="mr-2">클라이언트</span><a href="#클라이언트-7" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>	<span class="nx">manager</span> <span class="o">=</span> <span class="nx">aPerson</span><span class="p">.</span><span class="nx">manager</span><span class="p">;</span>
</pre></table></code></div></div><blockquote><p>p.271 중개자 제거하기 <br /> 위임 숨기기는 위임 객체를 캡슐화하는 이점을 갖고있으나 위임을 위해 단순 전달만 하는 메서드를 계속 추가해야할 수 있다. 그러면 서버 클래스는 그저 중개자로 전락하여 차라리 클라이언트가 위임 객체를 직접 호출하는 게 나을 수 있다.</p></blockquote></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/%EB%A6%AC%ED%8C%A9%ED%84%B0%EB%A7%81/'>리팩터링</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/%EB%A6%AC%ED%8C%A9%ED%84%B0%EB%A7%81/" class="post-tag no-text-decoration" >리팩터링</a> <a href="/tags/refactoring/" class="post-tag no-text-decoration" >refactoring</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%5B%EB%A6%AC%ED%8C%A9%ED%84%B0%EB%A7%81%5D+chapter+7+%EC%BA%A1%EC%8A%90%ED%99%94+-+joohee+Kim&url=https%3A%2F%2Fjooheekim0713.github.io%2Fposts%2F%25EB%25A6%25AC%25ED%258C%25A9%25ED%2584%25B0%25EB%25A7%2581-%25EC%25B1%2595%25ED%2584%25B0-7%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%5B%EB%A6%AC%ED%8C%A9%ED%84%B0%EB%A7%81%5D+chapter+7+%EC%BA%A1%EC%8A%90%ED%99%94+-+joohee+Kim&u=https%3A%2F%2Fjooheekim0713.github.io%2Fposts%2F%25EB%25A6%25AC%25ED%258C%25A9%25ED%2584%25B0%25EB%25A7%2581-%25EC%25B1%2595%25ED%2584%25B0-7%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fjooheekim0713.github.io%2Fposts%2F%25EB%25A6%25AC%25ED%258C%25A9%25ED%2584%25B0%25EB%25A7%2581-%25EC%25B1%2595%25ED%2584%25B0-7%2F&text=%5B%EB%A6%AC%ED%8C%A9%ED%84%B0%EB%A7%81%5D+chapter+7+%EC%BA%A1%EC%8A%90%ED%99%94+-+joohee+Kim" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/typescript101_part1/">[Typescript] 타입스크립트 도입 시작</a><li><a href="/posts/test_part2/">[Test] part.2 Jest</a><li><a href="/posts/react_hooks/">[React] useRef, useHistory</a><li><a href="/posts/react_performance_optimization/">[React] PureComponent, memo</a><li><a href="/posts/test_part1/">[Test] part.1 Test Pyramid</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/js/">JS</a> <a class="post-tag" href="/tags/javascript/">Javascript</a> <a class="post-tag" href="/tags/css/">CSS</a> <a class="post-tag" href="/tags/react/">React</a> <a class="post-tag" href="/tags/refactoring/">refactoring</a> <a class="post-tag" href="/tags/%EB%A6%AC%ED%8C%A9%ED%84%B0%EB%A7%81/">리팩터링</a> <a class="post-tag" href="/tags/html/">HTML</a> <a class="post-tag" href="/tags/typescript/">Typescript</a> <a class="post-tag" href="/tags/react-js/">React JS</a> <a class="post-tag" href="/tags/ts/">TS</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/%EB%A6%AC%ED%8C%A9%ED%84%B0%EB%A7%81-%EC%B1%95%ED%84%B0-2/"><div class="card-body"> <em class="small" data-ts="1655774460" data-df="ll" > Jun 21, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[리팩터링] chapter 2 리팩터링 원칙</h3><div class="text-muted small"><p> p.77 리팩터링을 효과적으로 하는 핵심은, 단계를 잘게 나눠야 더 빠르게 처리할 수 있고, 코드는 절대 깨지지 않으며, 이러한 작은 단계들이 모여서 상당히 큰 변화를 이룰 수 있다는 사실을 깨닫는 것이다. p.81 리팩터링하면 소프트웨어 설계가 좋아진다. 같은 일을 하더라도 설계가 나쁘면 코드가 길어지기 십상이다. 사실상 같은 일을 하...</p></div></div></a></div><div class="card"> <a href="/posts/%EB%A6%AC%ED%8C%A9%ED%84%B0%EB%A7%81-%EC%B1%95%ED%84%B0-3/"><div class="card-body"> <em class="small" data-ts="1655860860" data-df="ll" > Jun 22, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[리팩터링] chapter 3 코드에서 나는 악취</h3><div class="text-muted small"><p> p.114 이름 바꾸기는 단순히 이름을 다르게 표현하는 연습이 아니다. 마땅한 이름이 떠오르지 않는다면 설계에 더 근본적인 문제가 숨어 있을 가능성이 높다. p.115 가장 간단한 코드 중복의 예로, 한 클래스에 딸린 두 메서드가 똑같은 표현식을 사용하는 경우가 있다. 이럴 때는 함수 추출하기를 써서 양쪽 모두 추출된 메서드를 호출하게 ...</p></div></div></a></div><div class="card"> <a href="/posts/%EB%A6%AC%ED%8C%A9%ED%84%B0%EB%A7%81-%EC%B1%95%ED%84%B0-4/"><div class="card-body"> <em class="small" data-ts="1655972460" data-df="ll" > Jun 23, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[리팩터링] chapter 4 테스트 구축하기</h3><div class="text-muted small"><p> p.135 테스트를 작성하기 가장 좋은 시점은 프로그래미을 시작하기 전이다. 테스트를 작성하다보면 원하는 기능을 추가하기 위해 무엇이 필요한지 고민하게 된다. 구현보다 인터페이스에 집중하게 된다는 장점도 있다. 간혹 테스트가 갖춰지지않은 코드를 리팩터링할 때도 있다. 그럴 때는 곧바로 리팩터링하지 않고 먼저 자가테스트 코드부터 작성한다. ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/%EB%A6%AC%ED%8C%A9%ED%84%B0%EB%A7%81-%EC%B1%95%ED%84%B0-6/" class="btn btn-outline-primary" prompt="Older"><p>[리팩터링] chapter 6 기본적인 리팩터링</p></a> <a href="/posts/%ED%83%80%EC%9E%85%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EA%B0%95%EC%9D%98-%EC%A0%95%EB%A6%AC/" class="btn btn-outline-primary" prompt="Newer"><p>[TS] Typescript의 타입</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://jooheekim0713.github.io/posts/%EB%A6%AC%ED%8C%A9%ED%84%B0%EB%A7%81-%EC%B1%95%ED%84%B0-7/'; this.page.identifier = '/posts/%EB%A6%AC%ED%8C%A9%ED%84%B0%EB%A7%81-%EC%B1%95%ED%84%B0-7/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://jooheekim0713-github-io.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (typeof modeToggle !== "undefined") { /* modeToggle.addEventListener('click', reloadDisqus); // not pretty for 'color-scheme' */ window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/jooheekim0713">joohee Kim</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/js/">JS</a> <a class="post-tag" href="/tags/javascript/">Javascript</a> <a class="post-tag" href="/tags/css/">CSS</a> <a class="post-tag" href="/tags/react/">React</a> <a class="post-tag" href="/tags/refactoring/">refactoring</a> <a class="post-tag" href="/tags/%EB%A6%AC%ED%8C%A9%ED%84%B0%EB%A7%81/">리팩터링</a> <a class="post-tag" href="/tags/html/">HTML</a> <a class="post-tag" href="/tags/typescript/">Typescript</a> <a class="post-tag" href="/tags/react-js/">React JS</a> <a class="post-tag" href="/tags/ts/">TS</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
