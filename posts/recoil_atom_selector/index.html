<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="[Recoil] atom, selector" /><meta property="og:locale" content="en" /><meta name="description" content="upload what i learned. usually javascript, typescript and others." /><meta property="og:description" content="upload what i learned. usually javascript, typescript and others." /><link rel="canonical" href="https://jooheekim0713.github.io/posts/recoil_atom_selector/" /><meta property="og:url" content="https://jooheekim0713.github.io/posts/recoil_atom_selector/" /><meta property="og:site_name" content="joohee Kim" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-07-29T21:10:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[Recoil] atom, selector" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-07-29T21:10:00+09:00","datePublished":"2022-07-29T21:10:00+09:00","description":"upload what i learned. usually javascript, typescript and others.","headline":"[Recoil] atom, selector","mainEntityOfPage":{"@type":"WebPage","@id":"https://jooheekim0713.github.io/posts/recoil_atom_selector/"},"url":"https://jooheekim0713.github.io/posts/recoil_atom_selector/"}</script><title>[Recoil] atom, selector | joohee Kim</title><link rel="shortcut icon" href="/assets/img/favicons/song_favicon.png" /><meta name="apple-mobile-web-app-title" content="joohee Kim" /><meta name="application-name" content="joohee Kim" /><meta name="msapplication-TileColor" content="#da532c" /><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml" /><meta name="theme-color" content="#ffffff" /><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/song_circle.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">joohee Kim</a></div><div class="site-subtitle font-italic">software engineer upload posting what i learned</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/jooheekim0713" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['jooheekim.dev','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="https://www.linkedin.com/in/952a57240" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[Recoil] atom, selector</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[Recoil] atom, selector</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1659096600" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 29, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/jooheekim0713">joohee Kim</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1056 words"> <em>5 min</em> read</span></div></div></div><div class="post-content"><style> p{ text-indent : 1em; margin-top : 20px; margin-bottom : 20px; } .container { position: relative; padding-bottom: 56.25%; /* 16:9 */ height: 0; } .container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; } span{ position: relative; }</style><p><strong> <a href="https://recoiljs.org/"> Recoil 공식 문서</a> </strong></p><p> Recoil은 React를 위한 state 관리 라이브러리이다.<br /> React에서 state는 컴포넌트의 상태고 컴포넌트의 상태가 변경될 때마다 React는 화면을 리랜더링해서 바뀐 정보를 노출시킨다.문제는 React의 기본 state만 사용하면 전역으로 사용하는 상태를 관리가 힘들다는 것이다. 여러 화면에서 공통으로 state에 접근하기 위해서는 컴포넌트 줄줄이 state를 물려줘야한다. 그렇게하면 코드도 또 줄줄이 길어지고 state를 사용하지 않은 페이지에도 state를 물려주게 되어 쓸데없는 코드가 늘어난다. 그리고 이때 등장하는게 Recoil이다.</p><p> Recoil은 state가 이리저리 돌아다니는 현상을 막아준다. Recoil은 React 의 state를 atom으로 관리한다. atom을 사용하면 state가 사용되지 않는 컴포넌트를 타고 돌아다니는게 아니라 state정보가 필요한 컴포넌트가 atom에 직접 연결해서 바로 정보를 얻을 수 있다.</p><p><label for="recoil-youtube">Recoil atom에 대한 youtube 영상</label></p><div class="container" name="recoil-youtube"> <iframe width="560" height="315" src="https://www.youtube.com/embed/_ISAA_Jt9kI" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""> </iframe></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>  npm install recoil
</pre></table></code></div></div><p> Recoil을 설치한다.</p><h3 id="atom"><span class="mr-2">Atom</span><a href="#atom" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="apptsx"><span class="mr-2">App.tsx</span><a href="#apptsx" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">RecoilRoot</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">recoil</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">ReactDOM</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-dom</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">App</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./App</span><span class="dl">"</span><span class="p">;</span>

<span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">React</span><span class="p">.</span><span class="nx">StrictMode</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">RecoilRoot</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">App</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="sr">/RecoilRoot</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/React.StrictMode&gt;</span><span class="err">,
</span>  <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">root</span><span class="dl">"</span><span class="p">)</span>
<span class="p">);</span>
</pre></table></code></div></div><p> Recoil을 사용하기 위해 RecoilRoot를 import하고 App을 감싼다.</p><h4 id="atomtsx"><span class="mr-2">atom.tsx</span><a href="#atomtsx" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="k">export</span> <span class="kr">interface</span> <span class="nx">IToDo</span> <span class="p">{</span>
  <span class="nl">text</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nl">category</span><span class="p">:</span> <span class="nx">Categories</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">categoryState</span> <span class="o">=</span> <span class="nx">atom</span><span class="o">&lt;</span><span class="nx">Categories</span><span class="o">&gt;</span><span class="p">({</span>
  <span class="na">key</span><span class="p">:</span> <span class="dl">"</span><span class="s2">category</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">default</span><span class="p">:</span> <span class="nx">Categories</span><span class="p">.</span><span class="nx">TO_DO</span><span class="p">,</span>
<span class="p">});</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">toDoState</span> <span class="o">=</span> <span class="nx">atom</span><span class="o">&lt;</span><span class="nx">IToDo</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">({</span>
  <span class="na">key</span><span class="p">:</span> <span class="dl">"</span><span class="s2">toDo</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">default</span><span class="p">:</span> <span class="p">[],</span>
<span class="p">});</span>
</pre></table></code></div></div><p> atom을 관리하기 위한 atom.tsx를 만들고 사용할 atom과 selector를 작성한다.<br /> atom.tsx 외부에서도 사용할거니까 export 하는건 필수</p><h4 id="todotsx"><span class="mr-2">ToDo.tsx</span><a href="#todotsx" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="k">import</span> <span class="p">{</span> <span class="nx">useSetRecoilState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">recoil</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">ToDo</span><span class="p">({</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">category</span> <span class="p">}:</span> <span class="nx">IToDo</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">setToDos</span> <span class="o">=</span> <span class="nx">useSetRecoilState</span><span class="p">(</span><span class="nx">toDoState</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">onClick</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">:</span> <span class="nx">React</span><span class="p">.</span><span class="nx">MouseEvent</span><span class="o">&lt;</span><span class="nx">HTMLButtonElement</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="p">...</span>
    <span class="nx">setToDos</span><span class="p">((</span><span class="nx">oldToDos</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="p">...</span>
    <span class="p">});</span>
  <span class="p">};</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">...</span>
        <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">name</span><span class="o">=</span><span class="p">{</span><span class="nx">Categories</span><span class="p">.</span><span class="nx">TO_DO</span><span class="p">}</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">onClick</span><span class="p">}</span><span class="o">&gt;</span>
          <span class="nx">TO_DO</span>
        <span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>    <span class="p">...</span>
  <span class="p">);</span>
<span class="p">}</span>

</pre></table></code></div></div><p> atom.tsx에 있는 toDoState를 사용하기 위해서는 useSetRecoilState를 import한다.<br /> 참고로 Recoil atom은 React state와 유사하게 변수와 그 변수를 수정하는 함수 세트를 가지고 있다.<br /> useRecoilValue는 atom의 상태를 받아오는 함수고 useSetRecoilState는 atom 상태를 변경하기 위한 함수다.<br /> 두 기능을 모두 사용하고 싶다면 useRecoilState. useRecoilState 는 useState처럼 atom과 atom을 수정하는 함수를 함께 사용할수 있다. ToDo.tsx에서는 setToDos를 사용해서 onClick하면 onClick 함수에서 todo 상태를 변경하는 로직을 작성한다.</p><h3 id="selector"><span class="mr-2">Selector</span><a href="#selector" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p> selector는 atom 혹은 다른 selector의 상태를 입력받아서 동적인 데이터를 반환하는 함수다. 쉽게 말하면 atom, selector의 state 를 받아와서 원하는대로 가공하고 가공된 state를 반환하는 함수다.</p><h4 id="atomtsx-1"><span class="mr-2">atom.tsx</span><a href="#atomtsx-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre><span class="k">export</span> <span class="kr">interface</span> <span class="nx">IToDo</span> <span class="p">{</span>
  <span class="nl">text</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nl">category</span><span class="p">:</span> <span class="nx">Categories</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">toDoState</span> <span class="o">=</span> <span class="nx">atom</span><span class="o">&lt;</span><span class="nx">IToDo</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">({</span>
  <span class="na">key</span><span class="p">:</span> <span class="dl">"</span><span class="s2">toDo</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">default</span><span class="p">:</span> <span class="p">[],</span>
<span class="p">});</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">categoryState</span> <span class="o">=</span> <span class="nx">atom</span><span class="o">&lt;</span><span class="nx">Categories</span><span class="o">&gt;</span><span class="p">({</span>
  <span class="na">key</span><span class="p">:</span> <span class="dl">"</span><span class="s2">category</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">default</span><span class="p">:</span> <span class="nx">Categories</span><span class="p">.</span><span class="nx">TO_DO</span><span class="p">,</span>
<span class="p">});</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">toDoSelector</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">({</span>
  <span class="na">key</span><span class="p">:</span> <span class="dl">"</span><span class="s2">toDoSelector</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">get</span><span class="p">:</span> <span class="p">({</span> <span class="kd">get</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">toDos</span> <span class="o">=</span> <span class="kd">get</span><span class="p">(</span><span class="nx">toDoState</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">category</span> <span class="o">=</span> <span class="kd">get</span><span class="p">(</span><span class="nx">categoryState</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">toDos</span><span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">toDo</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">toDo</span><span class="p">.</span><span class="nx">category</span> <span class="o">===</span> <span class="nx">category</span><span class="p">);</span>
  <span class="p">},</span>
<span class="p">});</span>
</pre></table></code></div></div><p> toDoSelector는 toDoState와 categoryState 두 atom의 값을 가져오고 원하는 대로 가공해서 화면에 가공된 atom값을 보여준다.</p><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useRecoilState</span><span class="p">,</span> <span class="nx">useRecoilValue</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">recoil</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Categories</span><span class="p">,</span> <span class="nx">categoryState</span><span class="p">,</span> <span class="nx">toDoSelector</span><span class="p">,</span> <span class="nx">toDoState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../atom</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">CreateToDo</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./CreateToDo</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">ToDo</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./ToDo</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">ToDoList</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">toDos</span> <span class="o">=</span> <span class="nx">useRecoilValue</span><span class="p">(</span><span class="nx">toDoSelector</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">category</span><span class="p">,</span> <span class="nx">setCategory</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useRecoilState</span><span class="p">(</span><span class="nx">categoryState</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">onInput</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">:</span> <span class="nx">React</span><span class="p">.</span><span class="nx">FormEvent</span><span class="o">&lt;</span><span class="nx">HTMLSelectElement</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">setCategory</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">.</span><span class="nx">value</span> <span class="k">as</span> <span class="kr">any</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">To</span> <span class="nx">Dos</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">select</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">category</span><span class="p">}</span> <span class="nx">onInput</span><span class="o">=</span><span class="p">{</span><span class="nx">onInput</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">Categories</span><span class="p">.</span><span class="nx">TO_DO</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">TO_DO</span><span class="o">&lt;</span><span class="sr">/option</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">Categories</span><span class="p">.</span><span class="nx">DOING</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">DOING</span><span class="o">&lt;</span><span class="sr">/option</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">Categories</span><span class="p">.</span><span class="nx">DONE</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">DONE</span><span class="o">&lt;</span><span class="sr">/option</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/select</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">CreateToDo</span> <span class="o">/&gt;</span>
      <span class="p">{</span><span class="nx">toDos</span><span class="p">?.</span><span class="nx">map</span><span class="p">((</span><span class="nx">toDo</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">ToDo</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">toDo</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span> <span class="p">{...</span><span class="nx">toDo</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>      <span class="p">))}</span>
    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p> selector역시 atom을 사용하는 것과 마찬가지로 useRecoilState, useRecoilValue, useSetRecoilState 함수를 사용해 atom값을 가져오거나, 수정할 수 있다.</p><h3 id="참고할만한-블로그"><span class="mr-2">🎈참고할만한 블로그</span><a href="#참고할만한-블로그" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><a href="https://abangpa1ace.tistory.com/212">[Recoil] 전역 상태관리 라이브러리 - Recoil 정복기</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/recoil/'>Recoil</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/recoil/" class="post-tag no-text-decoration" >Recoil</a> <a href="/tags/selector/" class="post-tag no-text-decoration" >selector</a> <a href="/tags/atom/" class="post-tag no-text-decoration" >atom</a> <a href="/tags/react/" class="post-tag no-text-decoration" >React</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%5BRecoil%5D+atom%2C+selector+-+joohee+Kim&url=https%3A%2F%2Fjooheekim0713.github.io%2Fposts%2Frecoil_atom_selector%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%5BRecoil%5D+atom%2C+selector+-+joohee+Kim&u=https%3A%2F%2Fjooheekim0713.github.io%2Fposts%2Frecoil_atom_selector%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fjooheekim0713.github.io%2Fposts%2Frecoil_atom_selector%2F&text=%5BRecoil%5D+atom%2C+selector+-+joohee+Kim" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/typescript101_part1/">[Typescript] 타입스크립트 도입 시작</a><li><a href="/posts/test_part2/">[Test] part.2 Jest</a><li><a href="/posts/react_hooks/">[React] useRef, useHistory</a><li><a href="/posts/react_performance_optimization/">[React] PureComponent, memo</a><li><a href="/posts/test_part1/">[Test] part.1 Test Pyramid</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/js/">JS</a> <a class="post-tag" href="/tags/javascript/">Javascript</a> <a class="post-tag" href="/tags/css/">CSS</a> <a class="post-tag" href="/tags/react/">React</a> <a class="post-tag" href="/tags/refactoring/">refactoring</a> <a class="post-tag" href="/tags/%EB%A6%AC%ED%8C%A9%ED%84%B0%EB%A7%81/">리팩터링</a> <a class="post-tag" href="/tags/html/">HTML</a> <a class="post-tag" href="/tags/typescript/">Typescript</a> <a class="post-tag" href="/tags/react-js/">React JS</a> <a class="post-tag" href="/tags/ts/">TS</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/react_hooks/"><div class="card-body"> <em class="small" data-ts="1661148900" data-df="ll" > Aug 22, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[React] useRef, useHistory</h3><div class="text-muted small"><p> useRef 함수형 컴포넌트에서 ref를 사용할 때는 useRef hook을 사용한다.(클래스형 컴포넌트에서는 React.createRef를 사용한다.) useRef()를 사용하여 Ref 객체를 만들고, 선택하고 싶은 DOM 에 ref 값으로 설정한다. Ref 객체의 .current 프로퍼티는 선택한 DOM 의 값을 뜻한다. useRef...</p></div></div></a></div><div class="card"> <a href="/posts/react_useState/"><div class="card-body"> <em class="small" data-ts="1661776800" data-df="ll" > Aug 29, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[React] useState callback</h3><div class="text-muted small"><p> useState callback 1 2 3 4 5 const createOrUpdate = (card) =&amp;gt; { const updated = { ...cards }; updated[card.id] = card; setCards(updated); }; 기존의 코드는 이렇게 작성되어 있었다. 문제는 원하는 대로 실행되지 않았다는...</p></div></div></a></div><div class="card"> <a href="/posts/react_performance_optimization/"><div class="card-body"> <em class="small" data-ts="1661911200" data-df="ll" > Aug 31, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[React] PureComponent, memo</h3><div class="text-muted small"><p> React Virtual DOM React는 Component에 관련된 state, props이 변경되는 경우 랜더가 호출된다. state, prop이 변경되면 메모리상에 존재하는 Virtual DOM tree에 이전의 prop과 state로 구현된 tree와 새로 구현된 tree를 비교해서 변경된 부분만 DOM에 업데이트한다. 문제는 변경...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/ted0727/" class="btn btn-outline-primary" prompt="Older"><p>[MM] TED talk : The power of vulnerability | Brené Brown, JSconf, indentation rules in HTML</p></a> <a href="/posts/monthly_report_july/" class="btn btn-outline-primary" prompt="Newer"><p>[월간회고] 일할 결심</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://jooheekim0713.github.io/posts/recoil_atom_selector/'; this.page.identifier = '/posts/recoil_atom_selector/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://jooheekim0713-github-io.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (typeof modeToggle !== "undefined") { /* modeToggle.addEventListener('click', reloadDisqus); // not pretty for 'color-scheme' */ window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/jooheekim0713">joohee Kim</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/js/">JS</a> <a class="post-tag" href="/tags/javascript/">Javascript</a> <a class="post-tag" href="/tags/css/">CSS</a> <a class="post-tag" href="/tags/react/">React</a> <a class="post-tag" href="/tags/refactoring/">refactoring</a> <a class="post-tag" href="/tags/%EB%A6%AC%ED%8C%A9%ED%84%B0%EB%A7%81/">리팩터링</a> <a class="post-tag" href="/tags/html/">HTML</a> <a class="post-tag" href="/tags/typescript/">Typescript</a> <a class="post-tag" href="/tags/react-js/">React JS</a> <a class="post-tag" href="/tags/ts/">TS</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
